!function(){let e={all:"qm-anim-pulse",food:"qm-anim-food",drink:"qm-anim-drink",cart:"qm-anim-cart"};document.querySelectorAll(".quickmenu-item").forEach(function(a){a.addEventListener("click",function(t){let n=a.querySelector("[data-anim]");!n&&t.target&&t.target.closest("[data-anim]")&&(n=t.target.closest("[data-anim]")),function a(t){if(!t)return;let n=t.getAttribute("data-anim"),r=e[n]||"qm-anim-pulse";t.classList.remove(r),t.offsetWidth,t.classList.add(r),t.addEventListener("animationend",function e(){t.classList.remove(r),t.removeEventListener("animationend",e)})}(n)},{passive:!0})})}(),function(){var e=document.getElementById("fab-cart");e&&e.addEventListener("click",function(a){if(e.classList.contains("fab-loading")){a.preventDefault();return}e.classList.add("fab-loading");var t=e.querySelector(".spinner-border"),n=e.querySelector(".icon-default");t&&t.classList.remove("d-none"),n&&n.classList.add("d-none");var r=e.querySelector(".fab-label");r&&!r.dataset.orig&&(r.dataset.orig=r.textContent,r.textContent="Memuat‚Ä¶")},{passive:!0})}(),function(){var e;let a=window.AUSI_CFG||{},t=(a.sub_api||"").replace(/\/?$/,"/"),n=$("#grid-products"),r=$("#pagination-wrap"),i=$("#cart-count"),s=$("#fab-count");$("#sub_kategori").length||$("<input>",{type:"hidden",id:"sub_kategori",name:"sub_kategori",value:""}).appendTo("#filter-form"),$("#recommended").length||$("<input>",{type:"hidden",id:"recommended",name:"recommended",value:"0"}).appendTo("#filter-form"),$("#trend").length||$("<input>",{type:"hidden",id:"trend",name:"trend",value:""}).appendTo("#filter-form"),$("#trend_days").length||$("<input>",{type:"hidden",id:"trend_days",name:"trend_days",value:""}).appendTo("#filter-form"),$("#trend_min").length||$("<input>",{type:"hidden",id:"trend_min",name:"trend_min",value:""}).appendTo("#filter-form");let d=$("#subcat-wrap");function l(e){i&&i.length&&i.text(e),s&&s.length&&s.text(e)}function o(e,a){if(!e||!e.length||e.hasClass("btn-loading"))return;e.addClass("btn-loading"),e.find(".spinner-border").removeClass("d-none"),e.find(".icon-default").addClass("d-none");let t=e.find(".btn-text");t.length&&(t.data("orig")||t.data("orig",t.text()),t.text(a||"Menambah..."))}function c(e){if(!e||!e.length||!e.hasClass("btn-loading"))return;e.find(".spinner-border").addClass("d-none"),e.find(".icon-default").removeClass("d-none");let a=e.find(".btn-text");if(a.length){let t=a.data("orig");t&&a.text(t)}e.removeClass("btn-loading")}function m(e){return e=parseInt(e,10),isNaN(e)||e<1?1:e}function u(e,a){window.Swal?Swal.fire({title:e,text:a||"",timer:1500,showConfirmButton:!1,iconHtml:'<div class="cart-anim-outer"><div class="cart-anim-wrapper"><div class="drop-item drop-plate"></div><div class="drop-item drop-drink"></div><div class="cart-svg-wrap"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48" fill="none" stroke="#dc3545" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M6 12h7.5a2 2 0 0 1 1.9 1.5l2.2 8.5" /><path d="M17 22h22.5a2 2 0 0 1 1.9 2.6l-3 9a2 2 0 0 1-1.9 1.4H22.5a2 2 0 0 1-1.9-1.5L17 22Z" /><path d="M20 26h18" /><path d="M21.5 30h15" /><circle class="cart-wheel-shape" cx="22" cy="38" r="3.5" /><circle class="cart-wheel-shape" cx="36" cy="38" r="3.5" /><path d="M28 14l8 -4" stroke="#dc3545" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div></div>',customClass:{popup:"swal-cart-popup",icon:"swal-cart-icon"}}):alert((e?e+": ":"")+(a||""))}function h(e,a){window.Swal?Swal.fire({icon:"error",title:e||"Gagal",text:a||""}):alert((e?e+": ":"")+(a||""))}function g(){let e=new URL(window.location.href);"#grandong"!==e.hash&&(e.hash="grandong",history.replaceState(history.state,"",e.toString()));let a=document.getElementById("grandong");if(a){a.hasAttribute("tabindex")||a.setAttribute("tabindex","-1");let t=window.scrollX,n=window.scrollY;try{a.focus({preventScroll:!0})}catch(r){a.focus(),window.scrollTo(t,n)}}}function f(){return"1"===$("#recommended").val()}function v(e){$("#recommended").val(e?"1":"0"),e&&($("#kategori").val(""),$("#sub_kategori").val(""))}function b(){let e=$('#quickmenu .quickmenu-item[data-recommended="1"]');return e.length?e.first():$("#quickmenu .quickmenu-item").filter(function(){return"recomended"===$(this).find(".menu-label").text().trim().toLowerCase()}).first()}function p(e=1,t=!0){!function e(a=!0){a&&(n.html(function e(a){let t="";for(let n=0;n<8;n++)t+='<div class="col-6 col-md-3 mb-3"><div class="skel-card"><div class="skel-thumb skel-shimmer"></div><div class="skel-line w80 skel-shimmer"></div><div class="skel-line w60 skel-shimmer"></div><div class="skel-price skel-shimmer"></div><div class="skel-btn skel-shimmer"></div></div></div>';return t}(8)),r.html(""))}(!0);let i=function e(a=1){let t=$("#q").val()||"",n=$("#kategori").val()||"",r=$("#sub_kategori").val()||"",i=$("#sort").val()||"random",s=f()?1:0,d=$("#trend").val()||"",l=$("#trend_days").val()||"",o=$("#trend_min").val()||"",c=new URL(window.location.href),m=c.searchParams.get("seed");return m||"random"!==i||(m=String(1e9*Math.random()|0),c.searchParams.set("seed",m),history.replaceState({},"",c.toString())),{q:t,kategori:n,sub_kategori:r,sort:i,page:a,per_page:12,seed:m,recommended:s,trend:d,trend_days:l,trend_min:o}}(e);$.getJSON(a.list_ajax,i).done(function(e){if(!e||!e.success){n.html('<div class="col-12 alert alert-danger">Gagal memuat data.</div>');return}if(n.html(e.items_html),r.html(e.pagination_html),t){let s=new URL(window.location.href);s.searchParams.set("q",i.q),s.searchParams.set("kategori",i.kategori),s.searchParams.set("sub",i.sub_kategori),s.searchParams.set("sort",i.sort),s.searchParams.set("page",e.page),s.searchParams.set("seed",i.seed),i.recommended?s.searchParams.set("rec","1"):s.searchParams.delete("rec"),i.trend?s.searchParams.set("trend",i.trend):s.searchParams.delete("trend"),i.trend_days?s.searchParams.set("trend_days",i.trend_days):s.searchParams.delete("trend_days"),i.trend_min?s.searchParams.set("trend_min",i.trend_min):s.searchParams.delete("trend_min"),history.pushState(i,"",s.toString())}$("#grid-products").off("click",".btn-add-cart").on("click",".btn-add-cart",function(e){e.preventDefault();let t=$(this);if(t.hasClass("btn-loading")||t.is(":disabled"))return;let n=t.data("id"),r=m(t.data("qty"));o(t,"Menambah..."),$.ajax({url:a.add_to_cart,type:"POST",dataType:"json",data:{id:n,qty:r}}).done(function(e){if(!e||!e.success){h(e?.produk||"Oops!",e?.pesan||"Gagal menambahkan");return}l(e.count),u(e.produk||"Mantap!",e.pesan||"Item masuk keranjang")}).fail(function(){h("Error","Gagal terhubung ke server")}).always(function(){c(t)})}),$("#pagination-wrap").off("click","a[data-page]").on("click","a[data-page]",function(e){e.preventDefault();let a=parseInt($(this).data("page")||1,10);p(a);let t=document.querySelector(".navbar-fixed-top,.sticky-top,.app-header");!function e({offset:a=0,smooth:t=!0}={}){let n=document.getElementById("grandong");if(!n)return;let r=new URL(window.location.href);"#grandong"!==r.hash&&(r.hash="grandong",history.replaceState(history.state,"",r));let i=n.getBoundingClientRect().top+window.pageYOffset-(a||0);window.scrollTo({top:Math.max(0,i),behavior:t?"smooth":"auto"})}({offset:t?t.offsetHeight:0,smooth:!0})}),"function"==typeof bindDetailModal&&bindDetailModal()}).fail(function(){n.html('<div class="col-12 alert alert-danger">Koneksi bermasalah.</div>')})}function k(e){let a={random:"For You",new:"Terbaru",bestseller:"Terlaris",price_low:"Harga Rendah",price_high:"Harga Tinggi",sold_out:"Habis",trending:"Trending"}[e]||"Urutkan";if("trending"===e){let t=($("#trend").val()||"").toLowerCase(),n=parseInt($("#trend_days").val()||"0",10);"today"===t||1===n?a="Trending (Hari ini)":"week"===t||7===n?a="Trending (7 hari)":("month"===t||30===n)&&(a="Trending (30 hari)")}$("#sortBtnLabel").text(a)}function y(){let e="1"===$("#recommended").val(),a=String($("#kategori").val()||""),t=$("#quickmenu .quickmenu-item").not('[data-action="cart"]');if(t.removeClass("active"),e){$('#quickmenu .quickmenu-item[data-recommended="1"]').addClass("active");return}$("#quickmenu .quickmenu-item[data-kategori]").filter(function(){return String(this.getAttribute("data-kategori"))===a}).addClass("active")}function w(){d.hide().empty()}function _(e){let a=String(e||"");d.find(".subcat-badge").removeClass("badge-dark text-white active").addClass("badge-blue"),""===a?d.find('.subcat-badge[data-sub=""]').removeClass("badge-blue").addClass("badge-dark text-white active"):d.find('.subcat-badge[data-sub="'+a+'"]').removeClass("badge-blue").addClass("badge-dark text-white active")}function P(e){d.html('<div class="d-inline-flex align-items-center rounded px-2 py-1 bg-light border small text-muted" style="line-height:1.2;"><span class="spinner-border spinner-border-sm mr-2" role="status" style="width:0.9rem;height:0.9rem;border-width:0.15rem;border-right-color:transparent;"></span><span>Memuat subkategori‚Ä¶</span></div>').show(),$.getJSON(t+String(e)).done(function(e){let a=$("#sub_kategori").val()||"";if(e&&e.success&&Array.isArray(e.data)&&e.data.length){var t,n;let r;t=e.data,n=a,r='<a href="#" class="badge badge-pill subcat-badge badge-dark text-white mr-1" data-sub="">Semua</a>',(t||[]).forEach(e=>{r+=`<a href="#" class="badge badge-pill subcat-badge badge-blue mr-1" data-sub="${e.id}">${e.nama}</a>`}),d.html(r).show(),_(n)}else w()}).fail(function(){w()})}d.length||(d=$('<div id="subcat-wrap" class="mb-2" role="navigation" aria-label="Subkategori"></div>'),$(".quickmenu-wrap").first().after(d)),d.hide().empty();let S=null;$("#q").on("input",function(){clearTimeout(S),S=setTimeout(function(){p(1)},350)}).on("keydown",function(e){"Enter"===e.key&&(e.preventDefault(),clearTimeout(S),p(1))}),$(document).on("click","#btn-search",function(e){e.preventDefault(),p(1)}),$(document).on("click","#btn-reset",function(e){e.preventDefault(),$("#q").val(""),$("#kategori").val(""),$("#sub_kategori").val(""),$("#recommended").val("0"),$("#sort").val("random"),$("#trend").val(""),$("#trend_days").val(""),$("#trend_min").val(""),k("random"),y();let a=new URL(window.location.href);a.searchParams.delete("seed"),a.searchParams.delete("sub"),a.searchParams.delete("rec"),history.replaceState({},"",a.toString()),w(),p(1)}),$(document).on("click",".sort-opt",function(e){e.preventDefault();let a=$(this).data("sort");if($("#sort").val(a),$("#trend").val(""),$("#trend_days").val(""),$("#trend_min").val(""),"trending"===a){let t=String($(this).data("trend")||"week");$("#trend").val(t),"today"===t?$("#trend_days").val("1"):"week"===t?$("#trend_days").val("7"):"month"===t&&$("#trend_days").val("30"),$("#trend_min").val("1.0")}if(k(a),"random"===a){let n=new URL(window.location.href);n.searchParams.delete("seed"),history.replaceState({},"",n.toString())}p(1)}),$("#quickmenu").on("click",".quickmenu-item",function(e){if("cart"===$(this).data("action"))return;e.preventDefault();let a="1"===$(this).data("recommended")||1==$(this).data("recommended")||"recomended"===$(this).find(".menu-label").text().trim().toLowerCase();if(a){v(!0),$("#sort").val("trending"),$("#trend").val("week"),$("#trend_days").val("7"),$("#trend_min").val("1.0"),k("trending"),y(),w(),p(1),g();return}v(!1);let t=String($(this).data("kategori")||"");$("#kategori").val(t),$("#sub_kategori").val(""),y(),p(1),t?P(t):w(),g()}),$(document).on("click",".subcat-badge",function(e){e.preventDefault();let a=String($(this).data("sub")||"");$("#sub_kategori").val(a),_(a),p(1),g()}),(e=document.getElementById("fab-cart"))&&e.addEventListener("click",function(a){if(e.classList.contains("fab-loading")){a.preventDefault();return}e.classList.add("fab-loading");var t=e.querySelector(".spinner-border"),n=e.querySelector(".icon-default");t&&t.classList.remove("d-none"),n&&n.classList.add("d-none");var r=e.querySelector(".fab-label");r&&!r.dataset.orig&&(r.dataset.orig=r.textContent,r.textContent="Memuat‚Ä¶")},{passive:!0}),$(document).on("click",".js-leave-table",function(e){e.preventDefault();let a=this.href;window.Swal?Swal.fire({icon:"warning",title:"Keluar dari Meja?",html:'Santai, kamu bisa lanjut belanja dari rumah ‚Äî pesanan bisa kami <b>antar</b> (Delivery) atau <b>dibungkus</b> (Takeaway). \uD83D\uDE09<br><br><small style="display:inline-block;margin-top:.25rem;color:#6b7280">Kalau masih mau makan di tempat, <b>scan ulang barcode di meja</b> ya. \uD83C\uDF7DÔ∏è\uD83D\uDCF1</small>',showCancelButton:!0,confirmButtonText:"Iya, keluar",cancelButtonText:"Batal",reverseButtons:!0,focusCancel:!0}).then(e=>{e.isConfirmed&&(Swal.fire({icon:"success",title:"Keluar dari Dine-in",text:"Mode diubah. Lanjut belanja sebagai Delivery/Takeaway. \uD83D\uDE4C",timer:900,showConfirmButton:!1}),setTimeout(()=>{window.location.href=a},300))}):confirm("Keluar dari mode Dine-in? Kalau masih mau makan di tempat, scan ulang barcode di meja ya.")&&(window.location.href=a)}),$(document).off("click","#btn-add-cart-modal").on("click","#btn-add-cart-modal",function(e){e.preventDefault();let t=$(this);if(t.hasClass("btn-loading")||t.is(":disabled"))return;let n=t.data("id"),r=m($("#qty-modal").val());o(t,"Menambah..."),$.ajax({url:a.add_to_cart,type:"POST",dataType:"json",data:{id:n,qty:r}}).done(function(e){if(!e||!e.success){h(e?.title||"Oops!",e?.pesan||"Gagal menambahkan");return}let a=e.count||0;$("#fab-count").length&&$("#fab-count").text(a),$("#cart-count").length&&$("#cart-count").text(a);let t=$("#modalProduk");t.length?(t.one("hidden.bs.modal",function(){u(e.produk||"Mantap!",e.pesan||"Item masuk keranjang")}),t.modal("hide")):u(e.produk||"Mantap!",e.pesan||"Item masuk keranjang")}).fail(function(){h("Error","Gagal terhubung ke server")}).always(function(){c(t)})}),$(function(){$.getJSON(a.cart_count).done(function(e){e&&e.success&&l(e.count)}),$("#dropdownSortBtn").dropdown();let e=new URL(window.location.href);e.searchParams.has("q")&&$("#q").val(e.searchParams.get("q")),e.searchParams.has("kategori")&&$("#kategori").val(e.searchParams.get("kategori")),e.searchParams.has("sub")&&$("#sub_kategori").val(e.searchParams.get("sub")),e.searchParams.has("sort")&&$("#sort").val(e.searchParams.get("sort")),e.searchParams.has("trend")&&$("#trend").val(e.searchParams.get("trend")),e.searchParams.has("trend_days")&&$("#trend_days").val(e.searchParams.get("trend_days")),e.searchParams.has("trend_min")&&$("#trend_min").val(e.searchParams.get("trend_min")),"1"===e.searchParams.get("rec")||"1"===e.searchParams.get("recommended")?v(!0):v(!1),k($("#sort").val()||"random"),y();let t=$("#kategori").val();f()?w():t?P(t):w();let n=parseInt(e.searchParams.get("page")||"1",10);p(n,!1);let r=$("#mode-info"),i=(r.data("mode")||"").toString().toLowerCase(),s=(r.data("meja")||"").toString(),d="";d="dinein"===i||"dine-in"===i?""!==s?"Dine-in di "+s:"Dine-in":"delivery"===i?"Delivery":"walkin"===i?"Takeaway/Bungkus":"Belanja biasa";let o="";o="dinein"===i||"dine-in"===i?`Kamu saat ini <b>${d}</b> üëã<br>Pesanan akan dicatat ke meja kamu.<br><br><small style="color:#6b7280;display:inline-block;margin-top:.25rem;">Mau pindah jadi Delivery / Takeaway? Pakai tombol keluar di atas (ikon keluar meja).</small>`:"delivery"===i?`Kamu saat ini mode <b>${d}</b> üöö<br>Kami bisa antar pesananmu ke alamat kamu.`:"walkin"===i?`Kamu saat ini mode <b>${d}</b> üëú<br>Pesananmu akan dibungkus untuk diambil.`:`Kamu belanja sebagai <b>${d}</b> üõçÔ∏è`;let c="";try{c=localStorage.getItem("lastModeShown")||""}catch(m){}void 0===window.__MODE_ALERT_SHOWN&&(window.__MODE_ALERT_SHOWN=!1);let u=!window.__MODE_ALERT_SHOWN&&i!==c;if(u&&window.Swal){Swal.fire({icon:"info",title:d,html:o,confirmButtonText:"Oke",width:320}),window.__MODE_ALERT_SHOWN=!0;try{localStorage.setItem("lastModeShown",i)}catch(h){}}}),window.addEventListener("popstate",function(e){let a=e.state||{};$("#q").val(a.q||""),$("#kategori").val(a.kategori||""),$("#sub_kategori").val(a.sub_kategori||""),$("#sort").val(a.sort||"random"),$("#recommended").val(a.recommended?"1":"0"),$("#trend").val(a.trend||""),$("#trend_days").val(a.trend_days||""),$("#trend_min").val(a.trend_min||""),k($("#sort").val()),y(),a.recommended?w():a.kategori?P(a.kategori):w(),p(parseInt(a.page||1,10),!1)})}(),function(){let e=document.getElementById("quickmenu");if(!e)return;let a=e.closest(".quickmenu-wrap");function t(){let t=e.scrollWidth-e.clientWidth,n=Math.round(e.scrollLeft);a.classList.toggle("show-left",n>0),a.classList.toggle("show-right",n<t-1)}e.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),document.addEventListener("DOMContentLoaded",t),setTimeout(t,600);let n=!1;setTimeout(function(){let a=e.scrollWidth-e.clientWidth;a>8&&!n&&(n=!0,e.scrollBy({left:48,behavior:"smooth"}),setTimeout(()=>e.scrollBy({left:-48,behavior:"smooth"}),350))},800)}(),window.killMasks=function(){$(".window-mask, .messager-mask, .datagrid-mask, .easyui-mask, .mm-wrapper__blocker").css("pointer-events","none").hide()};