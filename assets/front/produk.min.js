!function(){let a={all:"qm-anim-pulse",food:"qm-anim-food",drink:"qm-anim-drink",cart:"qm-anim-cart"};document.querySelectorAll(".quickmenu-item").forEach(function(e){e.addEventListener("click",function(t){let n=e.querySelector("[data-anim]");!n&&t.target&&t.target.closest("[data-anim]")&&(n=t.target.closest("[data-anim]")),function e(t){if(!t)return;let n=t.getAttribute("data-anim"),i=a[n]||"qm-anim-pulse";t.classList.remove(i),t.offsetWidth,t.classList.add(i),t.addEventListener("animationend",function a(){t.classList.remove(i),t.removeEventListener("animationend",a)})}(n)},{passive:!0})})}(),function(){var a=document.getElementById("fab-cart");a&&a.addEventListener("click",function(e){if(a.classList.contains("fab-loading")){e.preventDefault();return}a.classList.add("fab-loading");var t=a.querySelector(".spinner-border"),n=a.querySelector(".icon-default");t&&t.classList.remove("d-none"),n&&n.classList.add("d-none");var i=a.querySelector(".fab-label");i&&!i.dataset.orig&&(i.dataset.orig=i.textContent,i.textContent="Memuat‚Ä¶")},{passive:!0})}(),function(){var a;let e=window.AUSI_CFG||{},t=(e.sub_api||"").replace(/\/?$/,"/"),n=$("#grid-products"),i=$("#pagination-wrap"),r=$("#cart-count"),s=$("#fab-count");$("#sub_kategori").length||$("<input>",{type:"hidden",id:"sub_kategori",name:"sub_kategori",value:""}).appendTo("#filter-form");let l=$("#subcat-wrap");function o(a){r&&r.length&&r.text(a),s&&s.length&&s.text(a)}function d(a,e){if(!a||!a.length||a.hasClass("btn-loading"))return;a.addClass("btn-loading"),a.find(".spinner-border").removeClass("d-none"),a.find(".icon-default").addClass("d-none");let t=a.find(".btn-text");t.length&&(t.data("orig")||t.data("orig",t.text()),t.text(e||"Menambah..."))}function c(a){if(!a||!a.length||!a.hasClass("btn-loading"))return;a.find(".spinner-border").addClass("d-none"),a.find(".icon-default").removeClass("d-none");let e=a.find(".btn-text");if(e.length){let t=e.data("orig");t&&e.text(t)}a.removeClass("btn-loading")}function u(a){return a=parseInt(a,10),isNaN(a)||a<1?1:a}function m(a,e){window.Swal?Swal.fire({title:a,text:e||"",timer:1500,showConfirmButton:!1,iconHtml:'<div class="cart-anim-outer"><div class="cart-anim-wrapper"><div class="drop-item drop-plate"></div><div class="drop-item drop-drink"></div><div class="cart-svg-wrap"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48" height="48" fill="none" stroke="#dc3545" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M6 12h7.5a2 2 0 0 1 1.9 1.5l2.2 8.5" /><path d="M17 22h22.5a2 2 0 0 1 1.9 2.6l-3 9a2 2 0 0 1-1.9 1.4H22.5a2 2 0 0 1-1.9-1.5L17 22Z" /><path d="M20 26h18" /><path d="M21.5 30h15" /><circle class="cart-wheel-shape" cx="22" cy="38" r="3.5" /><circle class="cart-wheel-shape" cx="36" cy="38" r="3.5" /><path d="M28 14l8 -4" stroke="#dc3545" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg></div></div></div>',customClass:{popup:"swal-cart-popup",icon:"swal-cart-icon"}}): alert((a?a+": ":"")+(e||""))}function g(a,e){window.Swal?Swal.fire({icon:"error",title:a||"Gagal",text:e||""}):alert((a?a+": ":"")+(e||""))}function f(){var a=document.getElementById("grandong");if(a){var e=a.getBoundingClientRect().top+window.pageYOffset-70;window.scrollTo({top:e,behavior:"smooth"})}}function h(a=1,t=!0){!function a(e=!0){e&&(n.html(function a(e){let t="";for(let n=0;n<8;n++)t+='<div class="col-6 col-md-3 mb-3"><div class="skel-card"><div class="skel-thumb skel-shimmer"></div><div class="skel-line w80 skel-shimmer"></div><div class="skel-line w60 skel-shimmer"></div><div class="skel-price skel-shimmer"></div><div class="skel-btn skel-shimmer"></div></div></div>';return t}(8)),i.html(""))}(!0);let r=function a(e=1){let t=$("#q").val()||"",n=$("#kategori").val()||"",i=$("#sub_kategori").val()||"",r=$("#sort").val()||"random",s=new URL(window.location.href),l=s.searchParams.get("seed");return l||"random"!==r||(l=String(Math.floor(1e9*Math.random())),s.searchParams.set("seed",l),history.replaceState({},"",s.toString())),{q:t,kategori:n,sub_kategori:i,sort:r,page:e,per_page:12,seed:l}}(a);$.getJSON(e.list_ajax,r).done(function(a){if(!a||!a.success){n.html('<div class="col-12 alert alert-danger">Gagal memuat data.</div>');return}if(n.html(a.items_html),i.html(a.pagination_html),t){let s=new URL(window.location.href);s.searchParams.set("q",r.q),s.searchParams.set("kategori",r.kategori),s.searchParams.set("sub",r.sub_kategori),s.searchParams.set("sort",r.sort),s.searchParams.set("page",a.page),s.searchParams.set("seed",r.seed),history.pushState(r,"",s.toString())}$("#grid-products").off("click",".btn-add-cart").on("click",".btn-add-cart",function(a){a.preventDefault();let t=$(this);if(t.hasClass("btn-loading")||t.is(":disabled"))return;let n=t.data("id"),i=u(t.data("qty"));d(t,"Menambah..."),$.ajax({url:e.add_to_cart,type:"POST",dataType:"json",data:{id:n,qty:i}}).done(function(a){if(!a||!a.success){g(a?.produk||"Oops!",a?.pesan||"Gagal menambahkan");return}o(a.count),m(a.produk||"Mantap!",a.pesan||"Item masuk keranjang")}).fail(function(){g("Error","Gagal terhubung ke server")}).always(function(){c(t)})}),$("#pagination-wrap").off("click","a[data-page]").on("click","a[data-page]",function(a){a.preventDefault();let e=parseInt($(this).data("page")||1,10);h(e),f()}),"function"==typeof bindDetailModal&&bindDetailModal()}).fail(function(){n.html('<div class="col-12 alert alert-danger">Koneksi bermasalah.</div>')})}function b(a){$("#sortBtnLabel").text({random:"For You",new:"Terbaru",bestseller:"Terlaris",price_low:"Harga Rendah",price_high:"Harga Tinggi",sold_out:"Habis"}[a]||"Urutkan")}function k(){let a=String($("#kategori").val()||"");$("#quickmenu .quickmenu-item").not('[data-action="cart"]').removeClass("active").filter(function(){return String($(this).data("kategori")||"")===a}).addClass("active")}function p(){l.hide().empty()}function v(a){let e=String(a||"");l.find(".subcat-badge").removeClass("badge-dark text-white active").addClass("badge-blue"),""===e?l.find('.subcat-badge[data-sub=""]').removeClass("badge-blue").addClass("badge-dark text-white active"):l.find('.subcat-badge[data-sub="'+e+'"]').removeClass("badge-blue").addClass("badge-dark text-white active")}function w(a){l.html('<div class="d-inline-flex align-items-center rounded px-2 py-1 bg-light border small text-muted" style="line-height:1.2;"><span class="spinner-border spinner-border-sm mr-2" role="status" style="width:0.9rem;height:0.9rem;border-width:0.15rem;border-right-color:transparent;"></span><span>Memuat subkategori‚Ä¶</span></div>').show(),$.getJSON(t+String(a)).done(function(a){let e=$("#sub_kategori").val()||"";if(a&&a.success&&Array.isArray(a.data)&&a.data.length){var t,n;let i;t=a.data,n=e,i='<a href="#" class="badge badge-pill subcat-badge badge-dark text-white mr-1" data-sub="">Semua</a>',(t||[]).forEach(a=>{i+=`<a href="#" class="badge badge-pill subcat-badge badge-blue mr-1" data-sub="${a.id}">${a.nama}</a>`}),l.html(i).show(),v(n)}else p()}).fail(function(){p()})}l.length||(l=$('<div id="subcat-wrap" class="mb-2" role="navigation" aria-label="Subkategori"></div>'),$(".quickmenu-wrap").first().after(l)),l.hide().empty();let y=null;$("#q").on("input",function(){clearTimeout(y),y=setTimeout(function(){h(1)},350)}).on("keydown",function(a){"Enter"===a.key&&(a.preventDefault(),clearTimeout(y),h(1))}),$(document).on("click","#btn-search",function(a){a.preventDefault(),h(1)}),$(document).on("click","#btn-reset",function(a){a.preventDefault(),$("#q").val(""),$("#kategori").val(""),$("#sub_kategori").val(""),$("#sort").val("random"),b("random"),k();let e=new URL(window.location.href);e.searchParams.delete("seed"),e.searchParams.delete("sub"),history.replaceState({},"",e.toString()),p(),h(1)}),$(document).on("click",".sort-opt",function(a){a.preventDefault();let e=$(this).data("sort");if($("#sort").val(e),b(e),"random"===e){let t=new URL(window.location.href);t.searchParams.delete("seed"),history.replaceState({},"",t.toString())}h(1)}),$("#quickmenu").on("click",".quickmenu-item",function(a){if("cart"===$(this).data("action"))return;a.preventDefault();let e=String($(this).data("kategori")||"");$("#kategori").val(e),$("#sub_kategori").val(""),k(),h(1),e?w(e):p(),f()}),$(document).on("click",".subcat-badge",function(a){a.preventDefault();let e=String($(this).data("sub")||"");$("#sub_kategori").val(e),v(e),h(1),f()}),(a=document.getElementById("fab-cart"))&&a.addEventListener("click",function(e){if(a.classList.contains("fab-loading")){e.preventDefault();return}a.classList.add("fab-loading");var t=a.querySelector(".spinner-border"),n=a.querySelector(".icon-default");t&&t.classList.remove("d-none"),n&&n.classList.add("d-none");var i=a.querySelector(".fab-label");i&&!i.dataset.orig&&(i.dataset.orig=i.textContent,i.textContent="Memuat‚Ä¶")},{passive:!0}),$(document).on("click",".js-leave-table",function(a){a.preventDefault();let e=this.href;window.Swal?Swal.fire({icon:"warning",title:"Keluar dari Meja?",html:'Santai, kamu bisa lanjut belanja dari rumah ‚Äî pesanan bisa kami <b>antar</b> (Delivery) atau <b>dibungkus</b> (Takeaway). \uD83D\uDE09<br><br><small style="display:inline-block;margin-top:.25rem;color:#6b7280">Kalau masih mau makan di tempat, <b>scan ulang barcode di meja</b> ya. \uD83C\uDF7DÔ∏è\uD83D\uDCF1</small>',showCancelButton:!0,confirmButtonText:"Iya, keluar",cancelButtonText:"Batal",reverseButtons:!0,focusCancel:!0}).then(a=>{a.isConfirmed&&(Swal.fire({icon:"success",title:"Keluar dari Dine-in",text:"Mode diubah. Lanjut belanja sebagai Delivery/Takeaway. \uD83D\uDE4C",timer:900,showConfirmButton:!1}),setTimeout(()=>{window.location.href=e},300))}):confirm("Keluar dari mode Dine-in? Kalau masih mau makan di tempat, scan ulang barcode di meja ya.")&&(window.location.href=e)}),$(document).off("click","#btn-add-cart-modal").on("click","#btn-add-cart-modal",function(a){a.preventDefault();let t=$(this);if(t.hasClass("btn-loading")||t.is(":disabled"))return;let n=t.data("id"),i=u($("#qty-modal").val());d(t,"Menambah..."),$.ajax({url:e.add_to_cart,type:"POST",dataType:"json",data:{id:n,qty:i}}).done(function(a){if(!a||!a.success){g(a?.title||"Oops!",a?.pesan||"Gagal menambahkan");return}let e=a.count||0;$("#fab-count").length&&$("#fab-count").text(e),$("#cart-count").length&&$("#cart-count").text(e);let t=$("#modalProduk");t.length?(t.one("hidden.bs.modal",function(){m(a.produk||"Mantap!",a.pesan||"Item masuk keranjang")}),t.modal("hide")):m(a.produk||"Mantap!",a.pesan||"Item masuk keranjang")}).fail(function(){g("Error","Gagal terhubung ke server")}).always(function(){c(t)})}),$(function(){$.getJSON(e.cart_count).done(function(a){a&&a.success&&o(a.count)}),k(),$("#dropdownSortBtn").dropdown();let a=new URL(window.location.href);a.searchParams.has("q")&&$("#q").val(a.searchParams.get("q")),a.searchParams.has("kategori")&&$("#kategori").val(a.searchParams.get("kategori")),a.searchParams.has("sub")&&$("#sub_kategori").val(a.searchParams.get("sub")),a.searchParams.has("sort")&&$("#sort").val(a.searchParams.get("sort")),b($("#sort").val()||"random"),k();let t=$("#kategori").val();t?w(t):p();let n=parseInt(a.searchParams.get("page")||"1",10);h(n,!1);let i=$("#mode-info"),r=(i.data("mode")||"").toString().toLowerCase(),s=(i.data("meja")||"").toString(),l="";l="dinein"===r||"dine-in"===r?""!==s?"Dine-in di "+s:"Dine-in":"delivery"===r?"Delivery":"walkin"===r?"Takeaway/Bungkus":"Belanja biasa";let d="";d="dinein"===r||"dine-in"===r?`Kamu saat ini <b>${l}</b> üëã<br>Pesanan akan dicatat ke meja kamu.<br><br><small style="color:#6b7280;display:inline-block;margin-top:.25rem;">Mau pindah jadi Delivery / Takeaway? Pakai tombol keluar di atas (ikon keluar meja).</small>`:"delivery"===r?`Kamu saat ini mode <b>${l}</b> üöö<br>Kami bisa antar pesananmu ke alamat kamu.`:"walkin"===r?`Kamu saat ini mode <b>${l}</b> üëú<br>Pesananmu akan dibungkus untuk diambil.`:`Kamu belanja sebagai <b>${l}</b> üõçÔ∏è`;let c="";try{c=localStorage.getItem("lastModeShown")||""}catch(u){}void 0===window.__MODE_ALERT_SHOWN&&(window.__MODE_ALERT_SHOWN=!1);let m=!window.__MODE_ALERT_SHOWN&&r!==c;if(m&&window.Swal){Swal.fire({icon:"info",title:l,html:d,confirmButtonText:"Oke",width:320}),window.__MODE_ALERT_SHOWN=!0;try{localStorage.setItem("lastModeShown",r)}catch(g){}}}),window.addEventListener("popstate",function(a){let e=a.state||{};$("#q").val(e.q||""),$("#kategori").val(e.kategori||""),$("#sub_kategori").val(e.sub_kategori||""),$("#sort").val(e.sort||"random"),b($("#sort").val()),k(),e.kategori?w(e.kategori):p(),h(parseInt(e.page||1,10),!1)})}(),function(){let a=document.getElementById("quickmenu");if(!a)return;let e=a.closest(".quickmenu-wrap");function t(){let t=a.scrollWidth-a.clientWidth,n=Math.round(a.scrollLeft);e.classList.toggle("show-left",n>0),e.classList.toggle("show-right",n<t-1)}a.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),document.addEventListener("DOMContentLoaded",t),setTimeout(t,600);let n=!1;setTimeout(function(){let e=a.scrollWidth-a.clientWidth;e>8&&!n&&(n=!0,a.scrollBy({left:48,behavior:"smooth"}),setTimeout(()=>a.scrollBy({left:-48,behavior:"smooth"}),350))},800)}(),window.killMasks=function(){$(".window-mask, .messager-mask, .datagrid-mask, .easyui-mask, .mm-wrapper__blocker").css("pointer-events","none").hide()};